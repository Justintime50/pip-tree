import pytest


@pytest.fixture
def expected_tree_output():
    """The poor man's approach to unit testing this library is to feed
    its own virtual environment details to itself and assert they match.

    This will certainly break when dependencies get bumped. Simply run:
    `venv/bin/pytest -vv`, grab the updated output, and swap the list below.
    """
    expected_tree_output = [{'name': 'Werkzeug', 'version': '2.0.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'urllib3', 'version': '1.26.4', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'toml', 'version': '0.10.2', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'setuptools', 'version': '54.2.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'requests', 'version': '2.25.1', 'updated': '2021-05-12', 'requires': [['certifi>=2017.4.17', 'chardet<5,>=3.0.2', 'idna<3,>=2.5', 'urllib3<1.27,>=1.21.1']]}, {'name': 'pytest', 'version': '6.2.4', 'updated': '2021-05-12', 'requires': [['attrs>=19.2.0', 'iniconfig', 'packaging', 'pluggy<1.0.0a1,>=0.12', 'py>=1.8.2', 'toml']]}, {'name': 'pytest-cov', 'version': '2.11.1', 'updated': '2021-05-12', 'requires': [['coverage>=5.2.1', 'pytest>=4.6']]}, {'name': 'pyparsing', 'version': '2.4.7', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'pyflakes', 'version': '2.3.1', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'pycodestyle', 'version': '2.7.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'py', 'version': '1.10.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'pluggy', 'version': '0.13.1', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'pip', 'version': '21.0.1', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'pip-tree', 'version': '0.5.0', 'updated': '2021-05-13', 'requires': [[]]}, {'name': 'packaging', 'version': '20.9', 'updated': '2021-05-12', 'requires': [['pyparsing>=2.0.2']]}, {'name': 'mock', 'version': '4.0.3',  # noqa
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    'updated': '2021-05-12', 'requires': [[]]}, {'name': 'mccabe', 'version': '0.6.1', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'MarkupSafe', 'version': '2.0.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'Jinja2', 'version': '3.0.0', 'updated': '2021-05-12', 'requires': [['MarkupSafe>=2.0.0rc2']]}, {'name': 'itsdangerous', 'version': '2.0.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'iniconfig', 'version': '1.1.1', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'idna', 'version': '2.10', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'Flask', 'version': '2.0.0', 'updated': '2021-05-12', 'requires': [['Jinja2>=3.0', 'Werkzeug>=2.0', 'click>=7.1.2', 'itsdangerous>=2.0']]}, {'name': 'flake8', 'version': '3.9.2', 'updated': '2021-05-12', 'requires': [['mccabe<0.7.0,>=0.6.0', 'pycodestyle<2.8.0,>=2.7.0', 'pyflakes<2.4.0,>=2.3.0']]}, {'name': 'docopt', 'version': '0.6.2', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'coveralls', 'version': '3.0.1', 'updated': '2021-05-12', 'requires': [['coverage<6.0,>=4.1', 'docopt>=0.6.1', 'requests>=1.0.0']]}, {'name': 'coverage', 'version': '5.5', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'click', 'version': '8.0.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'chardet', 'version': '4.0.0', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'certifi', 'version': '2020.12.5', 'updated': '2021-05-12', 'requires': [[]]}, {'name': 'attrs', 'version': '21.2.0', 'updated': '2021-05-12', 'requires': [[]]}]  # noqa

    return expected_tree_output


@pytest.fixture
def expected_package_count():
    """The number of dependencies that are contained in this virtual env.

    See note above for more details.
    """
    expected_package_count = 31
    return expected_package_count

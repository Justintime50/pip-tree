import pytest


@pytest.fixture
def expected_tree_output():
    """The poor man's approach to unit testing this library is to feed
    its own virtual environment details to itself and assert they match.

    This will certainly break when dependencies get bumped. Simply run:
    `venv/bin/pytest -vv`, grab the updated output, and swap the list below.
    """
    expected_tree_output = [{'name': 'attrs', 'version': '21.2.0', 'updated': '2021-05-13', 'requires': [], 'required_by': ['pytest']}, {'name': 'certifi', 'version': '2020.12.5', 'updated': '2021-05-13', 'requires': [], 'required_by': ['requests']}, {'name': 'chardet', 'version': '4.0.0', 'updated': '2021-05-13', 'requires': [], 'required_by': ['requests']}, {'name': 'coverage', 'version': '5.5', 'updated': '2021-05-13', 'requires': [], 'required_by': ['coveralls', 'pytest-cov']}, {'name': 'coveralls', 'version': '3.0.1', 'updated': '2021-05-13', 'requires': ['coverage<6.0,>=4.1', 'docopt>=0.6.1', 'requests>=1.0.0'], 'required_by': []}, {'name': 'docopt', 'version': '0.6.2', 'updated': '2021-05-13', 'requires': [], 'required_by': ['coveralls']}, {'name': 'flake8', 'version': '3.9.2', 'updated': '2021-05-13', 'requires': ['mccabe<0.7.0,>=0.6.0', 'pycodestyle<2.8.0,>=2.7.0', 'pyflakes<2.4.0,>=2.3.0'], 'required_by': []}, {'name': 'idna', 'version': '2.10', 'updated': '2021-05-13', 'requires': [], 'required_by': ['requests']}, {'name': 'iniconfig', 'version': '1.1.1', 'updated': '2021-05-13', 'requires': [], 'required_by': ['pytest']}, {'name': 'mccabe', 'version': '0.6.1', 'updated': '2021-05-13', 'requires': [], 'required_by': ['flake8']}, {'name': 'mock', 'version': '4.0.3', 'updated': '2021-05-13', 'requires': [], 'required_by': []}, {'name': 'packaging', 'version': '20.9', 'updated': '2021-05-13', 'requires': ['pyparsing>=2.0.2'], 'required_by': ['pytest']}, {'name': 'pip', 'version': '21.0.1', 'updated': '2021-05-13',  # noqa
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               'requires': [], 'required_by': []}, {'name': 'pip-tree', 'version': '1.0.0', 'updated': '2021-05-13', 'requires': [], 'required_by': []}, {'name': 'pluggy', 'version': '0.13.1', 'updated': '2021-05-13', 'requires': [], 'required_by': ['pytest']}, {'name': 'py', 'version': '1.10.0', 'updated': '2021-05-13', 'requires': [], 'required_by': ['pytest']}, {'name': 'pycodestyle', 'version': '2.7.0', 'updated': '2021-05-13', 'requires': [], 'required_by': ['flake8']}, {'name': 'pyflakes', 'version': '2.3.1', 'updated': '2021-05-13', 'requires': [], 'required_by': ['flake8']}, {'name': 'pyparsing', 'version': '2.4.7', 'updated': '2021-05-13', 'requires': [], 'required_by': ['packaging']}, {'name': 'pytest', 'version': '6.2.4', 'updated': '2021-05-13', 'requires': ['attrs>=19.2.0', 'iniconfig', 'packaging', 'pluggy<1.0.0a1,>=0.12', 'py>=1.8.2', 'toml'], 'required_by': ['pytest-cov']}, {'name': 'pytest-cov', 'version': '2.11.1', 'updated': '2021-05-13', 'requires': ['coverage>=5.2.1', 'pytest>=4.6'], 'required_by': []}, {'name': 'requests', 'version': '2.25.1', 'updated': '2021-05-13', 'requires': ['certifi>=2017.4.17', 'chardet<5,>=3.0.2', 'idna<3,>=2.5', 'urllib3<1.27,>=1.21.1'], 'required_by': ['coveralls']}, {'name': 'setuptools', 'version': '54.2.0', 'updated': '2021-05-13', 'requires': [], 'required_by': []}, {'name': 'toml', 'version': '0.10.2', 'updated': '2021-05-13', 'requires': [], 'required_by': ['pytest']}, {'name': 'urllib3', 'version': '1.26.4', 'updated': '2021-05-13', 'requires': [], 'required_by': ['requests']}]  # noqa

    return expected_tree_output


@pytest.fixture
def expected_package_count():
    """The number of dependencies that are contained in this virtual env.

    See note above for more details.
    """
    expected_package_count = 25
    return expected_package_count

language: python

python:
    - '3.6'
    - '3.7'
    - '3.8'

install: pip install -e ."[dev]"

script: 
    - flake8 pippin/*.py
    - flake8 test/*.py
    - pytest --cov=pippin --cov-branch
    - shellcheck legacy/*.sh

deploy:
    provider: pypi
    username: "__token__"
    password:
        secure: b+9UwDUvvpJq1wR7Q7uYi8f6jPJFVIWvr5szvIKjhpnZoesyJPeg6n/cILxMLR91F0a4Mequ7sGxs74NvMpa+zsE2Ayc9SEeamrcMSD/DzzdCl5NlVg2rPLMzIC6AvPeVxfq1tgu78UyNS1iRauoeaqpCOeDRQdHjaopd2SHEPMAHfrvwXmR2KaD9TfXFWKfjWwgRqNmysINZBsnC3EG6YKdJHjzXEU6eMBNhcN6cqbszP9Q0SmuwxZA/W1z0S0YYA5JoFqB3p2hcVPDr0pEhI8ErM1Lm8+LNsJkyBBzParzve74ApBC2K4v55mjx2zc0cGioHWRboVJyC+hM4MRhU8dynTd0iU7y4gUbtB3HR+tcne94wyJjatpzkIRDRTnKzqH/IPOSVfO3TSt6C+6UEEm0nPosVbeCN/hDM1ufbG1OI8Of/NcwzD29Jcj2KMHGdPrtkHKHgZZJjPrim9HMbudHL40us1h1voiL7t/SpaRasbVqTSXGS/6K60aRjq+MU91UtByBbZcoicPuHmn0n7cSMMUA/eeyE8aPOkBQSNB6cV90UCk014WnBWwoUNyVgYpvD9P391awGEYVSsuk/UkBtn+ofeDeEOAoz4XeiIi8nTc/jCeUy/hoPawOn+N2OZd7Tw4Lcpa/tu3HGaUdHntJ2alYf5BEJmvnv/Uvug=
    on:
        tags: true
    skip_existing: true

after_success:
    - coveralls
